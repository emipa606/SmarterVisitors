<?xml version="1.0" encoding="utf-8"?>
<ModMetaData>
  <name>Smarter Visitors</name>
  <packageId>Mlie.SmarterVisitors</packageId>
  <author>Mlie</author>
  <url>https://github.com/emipa606/SmarterVisitors</url>
  <supportedVersions>
    <li>1.4</li>
  </supportedVersions>
  <modDependencies>
    <li>
      <packageId>brrainz.harmony</packageId>
      <displayName>Harmony</displayName>
      <steamWorkshopUrl>steam://url/CommunityFilePage/2009463077</steamWorkshopUrl>
      <downloadUrl>https://github.com/pardeike/HarmonyRimWorld/releases/latest</downloadUrl>
    </li>
  </modDependencies>
  <loadAfter>
    <li>brrainz.harmony</li>
  </loadAfter>
  <description>[img]https://i.imgur.com/iCj5o7O.png[/img]

Since visitors decide when they want to leave, it may not always happen at the best time.
This mod checks the map when visitor-groups decide to leave and can delay this from happening.
Included in the mod is also a Visitor-spot that lets you set a specific spot where your guests will hang around. This can make it easier to protect them from dangers.

You can select what type of conditions should delay visitors from leaving in the mod-options:
[list]
[*] Dangers on the map. These are things like raids, maddened animals, toxic fallout etc. If present visitors will ask you if they could stay for another day. You have the option to deny this to make them leave anyway, approve it to make them try again in 24 hours or just ask again in an hour.
[*] Health-issues. If any pawn in the group are suffering from health-issues that require medical rest, they will check again in an hour until all pawns are healthy enough to travel.
[*] UV-sensitivity (Biotech gene). If any pawn have the intense UV-sensitivity gene, the group will delay their travel until the sun has gone down. This also includes Vampires from [url=https://steamcommunity.com/sharedfiles/filedetails/?id=1187010034]Rim of Madness - Vampires[/url].
[/list]

There is also an option for visitors getting negative thoughts if staying around longer than they planned. This increases for longer delays.
You can also add extra food-rations to visitors inventories to make longer delays less of a problem.

The mod works well with the excellent mod [url=https://steamcommunity.com/sharedfiles/filedetails/?id=753498552]Hospitality[/url] by Orion. The check for dangers on the map is adapted from the same check that hospitality-groups do when entering the map.

The mod only triggers when visitors leave triggered by time, things like low temperatures or hostile actions are not affected. If you have any other ideas on what visitors or other groups should check when leaving, please leave a comment and Ill try to implement it!

[table]
    [tr]
        [td][url=https://dsc.gg/mlie][img]https://i.imgur.com/zdzzBrc.png[/img][/url][/td]
        [td][url=https://github.com/emipa606/SmarterVisitors][img]https://i.imgur.com/kTkpTOE.png[/img][/url][/td]
    [/tr]
    [tr]
        [td][img]https://i.imgur.com/WjDSfUn.png[/img][/td]
        [td][img]https://i.imgur.com/h5VwTNL.png[/img][/td]
    [/tr]
[/table]

[img]https://i.imgur.com/Ds0rBAD.png[/img]
Since modding is just a hobby for me I expect no donations to keep modding. If you still want to show your support you can gift me anything from my [url=https://store.steampowered.com/wishlist/id/Mlie]Wishlist[/url] or buy me a cup of tea.

[url=https://ko-fi.com/G2G55DDYD][img]https://i.imgur.com/VWG0yff.png[/img][/url]

[img]https://i.imgur.com/5xwDG6H.png[/img]
[list]
[*] See if the the error persists if you just have this mod and its requirements active.
[*] If not, try adding your other mods until it happens again.
[*] Post your error-log using [url=https://steamcommunity.com/workshop/filedetails/?id=818773962]HugsLib[/url] or the standalone [url=https://steamcommunity.com/sharedfiles/filedetails/?id=2873415404]Uploader[/url] and command Ctrl+F12
[*] For best support, please use the Discord-channel for error-reporting.
[*] Do not report errors by making a discussion-thread, I get no notification of that.
[*] If you have the solution for a problem, please post it to the GitHub repository.
[/list]

[url=https://steamcommunity.com/sharedfiles/filedetails/changelog/3012491521][img]https://img.shields.io/github/v/release/emipa606/SmarterVisitors?label=latest%20version&amp;style=plastic&amp;labelColor=0070cd&amp;color=white[/img][/url]</description>
</ModMetaData>